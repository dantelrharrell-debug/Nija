# Android App Store Configuration

This directory contains Android-specific configuration files for the NIJA mobile app.

## Required Files (Generated by Capacitor)

After running `npm run cap:add:android`, the following will be generated:
- `app/src/main/AndroidManifest.xml` - Android app configuration
- `app/src/main/res/` - App resources (icons, strings, etc.)
- `app/build.gradle` - App build configuration
- `build.gradle` - Project build configuration

## Permissions (AndroidManifest.xml)

Required permissions for the NIJA app:

```xml
<!-- Internet access for API calls -->
<uses-permission android:name="android.permission.INTERNET" />

<!-- Network state for connectivity checks -->
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<!-- Push notifications -->
<uses-permission android:name="android.permission.POST_NOTIFICATIONS" />

<!-- Vibration for haptic feedback -->
<uses-permission android:name="android.permission.VIBRATE" />

<!-- Camera for QR code scanning (optional) -->
<uses-permission android:name="android.permission.CAMERA" />

<!-- Storage for saving reports (optional) -->
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

<!-- Biometric authentication -->
<uses-permission android:name="android.permission.USE_BIOMETRIC" />
<uses-permission android:name="android.permission.USE_FINGERPRINT" />
```

## App Configuration

### Application Tag (AndroidManifest.xml)

```xml
<application
    android:name=".MainApplication"
    android:allowBackup="false"
    android:icon="@mipmap/ic_launcher"
    android:roundIcon="@mipmap/ic_launcher_round"
    android:label="@string/app_name"
    android:theme="@style/AppTheme"
    android:usesCleartextTraffic="false"
    android:networkSecurityConfig="@xml/network_security_config">
    
    <!-- Main Activity -->
    <activity
        android:name=".MainActivity"
        android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale|smallestScreenSize|screenLayout|uiMode"
        android:label="@string/app_name"
        android:launchMode="singleTask"
        android:theme="@style/AppTheme.NoActionBarLaunch"
        android:exported="true">
        
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    
    <!-- Firebase Cloud Messaging -->
    <service
        android:name=".FirebaseMessagingService"
        android:exported="false">
        <intent-filter>
            <action android:name="com.google.firebase.MESSAGING_EVENT" />
        </intent-filter>
    </service>
</application>
```

### Network Security Configuration

Create `app/src/main/res/xml/network_security_config.xml`:

```xml
<?xml version="1.0" encoding="utf-8"?>
<network-security-config>
    <base-config cleartextTrafficPermitted="false">
        <trust-anchors>
            <certificates src="system" />
        </trust-anchors>
    </base-config>
    
    <!-- For development only - remove in production -->
    <domain-config cleartextTrafficPermitted="true">
        <domain includeSubdomains="true">localhost</domain>
        <domain includeSubdomains="true">10.0.2.2</domain>
    </domain-config>
</network-security-config>
```

## App Icons

Required sizes for Android:
- `mipmap-mdpi/` - 48x48
- `mipmap-hdpi/` - 72x72
- `mipmap-xhdpi/` - 96x96
- `mipmap-xxhdpi/` - 144x144
- `mipmap-xxxhdpi/` - 192x192
- `playstore/` - 512x512 (Google Play)

### Adaptive Icons

Android 8.0+ requires adaptive icons:
- Foreground layer (108x108dp safe zone in 108x108dp canvas)
- Background layer (108x108dp)

## Build Configuration

### Gradle Configuration (app/build.gradle)

```gradle
android {
    compileSdkVersion 33
    defaultConfig {
        applicationId "com.nija.trading"
        minSdkVersion 22
        targetSdkVersion 33
        versionCode 1
        versionName "1.0.0"
    }
    
    buildTypes {
        release {
            minifyEnabled true
            shrinkResources true
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
    
    signingConfigs {
        release {
            storeFile file(System.getenv("ANDROID_KEYSTORE_PATH") ?: "release.keystore")
            storePassword System.getenv("ANDROID_KEYSTORE_PASSWORD")
            keyAlias System.getenv("ANDROID_KEY_ALIAS")
            keyPassword System.getenv("ANDROID_KEY_PASSWORD")
        }
    }
}
```

## Keystore Generation

Generate release keystore:

```bash
keytool -genkey -v -keystore release.keystore -alias nija-release \
  -keyalg RSA -keysize 2048 -validity 10000

# Store credentials securely
# DO NOT commit keystore to git
```

## Build Commands

### Development Build
```bash
npm run android:build
# or
cd android && ./gradlew assembleDebug
```

### Release Build (APK)
```bash
cd android && ./gradlew assembleRelease
```

### Release Build (AAB - App Bundle)
```bash
cd android && ./gradlew bundleRelease
```

## Google Play Console

### Create App Listing

1. **App Details**
   - App name: NIJA
   - Short description (80 chars)
   - Full description (4000 chars)
   - App category: Finance
   - Content rating: Parental Guidance

2. **Graphics**
   - App icon: 512x512 PNG
   - Feature graphic: 1024x500 PNG
   - Phone screenshots: Min 2, Max 8 (16:9 or 9:16 ratio)
   - 7-inch tablet screenshots (optional)
   - 10-inch tablet screenshots (optional)

3. **Privacy Policy**
   - URL to privacy policy (required for Finance apps)

4. **App Access**
   - Provide demo credentials if app requires login

5. **Ads Declaration**
   - Declare if app contains ads

6. **Content Rating**
   - Complete IARC questionnaire
   - Financial trading apps typically get "Everyone" or "Teen" rating

## Versioning

Update in `android/app/build.gradle`:
```gradle
defaultConfig {
    versionCode 1      // Increment for each release
    versionName "1.0.0"  // Semantic versioning
}
```

## Release Checklist

- [ ] Generate signed release AAB
- [ ] Test release build on multiple devices
- [ ] Complete Google Play Console listing
- [ ] Upload AAB to Google Play Console
- [ ] Complete content rating questionnaire
- [ ] Add privacy policy URL
- [ ] Add screenshots and graphics
- [ ] Set pricing (Free with In-App Purchases)
- [ ] Submit for review
- [ ] Monitor Play Console for review status

## App Signing

Google Play App Signing (recommended):
1. Enroll in Google Play App Signing
2. Upload initial APK/AAB
3. Google manages signing keys
4. Upload certificate to Google Play

## Testing

### Internal Testing
- Create internal testing track
- Add testers by email
- Share testing link

### Closed Testing (Beta)
- Create closed testing track
- Add testers
- Collect feedback

### Open Testing
- Create open testing track
- Public beta testing

## Distribution

### Staged Rollout
1. Start with 5% of users
2. Monitor crash reports
3. Gradually increase to 10%, 25%, 50%, 100%

## Compliance

### Financial App Requirements
- Privacy policy (required)
- Terms of service
- Risk disclosures
- Data encryption (SSL/TLS)
- Secure authentication
- No collection of sensitive financial data without disclosure

### Target API Level
- Must target API level 31+ (Android 12) for new apps
- Update annually to latest API level

## Firebase Setup (for Push Notifications)

1. Create Firebase project
2. Add Android app to Firebase
3. Download `google-services.json`
4. Place in `android/app/` directory
5. Add Firebase dependencies to `build.gradle`

```gradle
dependencies {
    implementation platform('com.google.firebase:firebase-bom:32.0.0')
    implementation 'com.google.firebase:firebase-messaging'
}
```
